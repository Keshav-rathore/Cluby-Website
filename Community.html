<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/Frontend/public/Images/Cluby_Icon.png" type="image/x-icon">
    <title>Community - Cluby</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.0.2/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body class="bg-gray-100 font-sans antialiased">

    <header class="bg-white shadow-md p-4 flex justify-between items-center">
        <div class="flex items-center">
          <img src="/Frontend/public/Images/Cluby_Icon.png" alt="Cluby Logo" class="h-10 w-10 mr-2">
          <h1 class="text-3xl font-bold text-gray-800">Cluby</h1>
        </div>
        <nav>
          <ul class="flex space-x-4">
            <li><a href="/Frontend/src/pages/C_Dashboard.html" class="text-blue-600 hover:text-blue-900">Home</a></li>
            <li><a href="/Frontend/src/pages/ClubList.html" class="text-blue-600 hover:text-blue-900">Find</a></li>
            <li><a href="/Frontend/src/pages/Recruit.html" class="text-blue-600 hover:text-blue-900">Recruit</a></li>
            <li><a href="/Frontend/src/pages/Community.html" class="text-blue-600 hover:text-blue-900">Community</a></li>
            <li><a href="/Frontend/src/pages/C_profile.html" class="flex items-center space-x-2 hover:text-blue-600">
                <i class="fa fa-user-circle text-2xl"></i>
              </a></li>
          </ul>
        </nav>
      </header>

    <div class=" mx-auto py-6">
        <div class="bg-white rounded-lg shadow-md p-4 flex flex-wrap items-center space-x-4">
            <input type="text" placeholder="Search posts..."
                class="flex-grow border border-gray-300 rounded-md p-2 focus:outline-none focus:border-blue-500">
            <button class="px-4 py-1 text-blue-500 border border-blue-500 rounded-md hover:bg-blue-500 hover:text-white">All
                Posts</button>
            <button class="px-4 py-1 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-300">Events</button>
            <button
                class="px-4 py-1 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-300">Announcements</button>
        </div>
    </div>


    <!-- Main Layout -->
    <div class="container mx-auto py-6 grid grid-cols-1 lg:grid-cols-12 gap-6">

        <!-- Sidebar -->
        <aside class="lg:col-span-3 space-y-6">
            <!-- Event Calendar -->
            <div class="bg-white rounded-lg shadow-md p-4">
                <h2 class="text-lg font-semibold text-gray-800">Event Calendar</h2>
                <div class="mt-4">
                    <!-- Placeholder Calendar -->
                    <div class="bg-gray-100 rounded p-4 text-center">
                        <div id="calendar"></div>
                    </div>
                </div>
            </div>

            <!-- Pinned Announcements -->
            <div class="bg-white rounded-lg shadow-md p-4 space-y-4">
                <h2 class="text-lg font-semibold text-gray-800">Pinned Announcements</h2>
                <!-- Sample Announcement -->
                <div class="p-3 bg-gray-50 rounded-lg border-l-4 border-blue-500">
                    <p class="font-semibold text-gray-700">Welcome to Timi People üéâ</p>
                    <p class="text-sm text-gray-600">Exciting updates with you!...</p>
                    <a href="#" class="text-blue-500 text-sm hover:underline">View post</a>
                </div>
                <!-- Repeat similar structure for more announcements -->
            </div>
        </aside>

        <!-- Main Content -->
        <main class="lg:col-span-6 space-y-6">
            <!-- Post Card -->
            <div class="bg-white rounded-lg shadow-md p-5">

            </div>

        </main>

        <!-- Upcoming Events Sidebar -->
        <aside class="lg:col-span-3 space-y-6">
            <div class="bg-white rounded-lg shadow-md p-4">
                <h2 class="text-lg font-semibold text-gray-800">Upcoming Event</h2>
                <div class="mt-4 p-4 bg-gray-50 rounded-lg">
                    <h3 class="font-bold text-gray-700">Children‚Äôs Room</h3>
                    <p class="text-sm text-gray-600">13 Nov 2023 ‚Ä¢ 10:00 AM</p>
                    <a href="#" class="text-blue-500 text-sm hover:underline mt-2 inline-block">View Details</a>
                </div>
            </div>
        </aside>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth'
            });
            calendar.render();
        });
    </script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.js'></script>

    <!-- Footer -->
    <footer class="bg-white py-6 mt-10 shadow-inner">
        <p class="text-center text-gray-500">¬© 2024 Cluby. All rights reserved.</p>
    </footer>


    <script>
        //Sample database stored in Local Storage
        if (!localStorage.getItem('communityData')) {
            const communityData = {
                posts: [
                    {
                        id: 1,
                        userName: 'Yuvraj Chandel',
                        userAvatar: '/Frontend/public/Images/johndoe.jpeg',
                        clubName: 'Robotics Club',
                        content: 'The Asimov Robotics Club invites you to the <strong>Arduino Innovators Workshop</strong>. Whether curious about robotics or interested in exploring the world of coding, we invite you to join us!',
                        image: '/Frontend/public/Images/Event_poster.jpg',
                        likes: 925,
                        comments: [],
                        shares: 24,
                    },
                    {
                        id: 2,
                        userName: 'Simran Kapoor',
                        userAvatar: '/Frontend/public/Images/johndoe.jpeg',
                        clubName: 'Cultural Club',
                        content: 'Join us for a grand <strong>Dance Fiesta</strong> this weekend! Bring your energy and let‚Äôs groove together. Open for all college students!',
                        image: 'Frontend/public/Images/Dance_fiesta.jpg',
                        likes: 480,
                        comments: [
                            { commenter: 'Rohan Mehta', comment: 'Looking forward to this!' },
                            { commenter: 'Aisha Khan', comment: 'Excited!' },
                        ],
                        shares: 18,
                    },
                ],
            };
            localStorage.setItem('communityData', JSON.stringify(communityData));
        }

        // Fetching the database from Local Storage
        const communityData = JSON.parse(localStorage.getItem('communityData'));

        // Dynamically rendering posts
        function renderPosts() {
            const mainContent = document.querySelector('main');
            mainContent.innerHTML = ''; // Clear previous content

            communityData.posts.forEach(post => {
                const postCard = `
            <div class="bg-white rounded-lg shadow-md p-5 post-card" data-id="${post.id}">
                <div class="flex items-center space-x-4">
                    <img src="${post.userAvatar}" alt="User Avatar" class="w-10 h-10 rounded-full">
                    <div>
                        <h3 class="font-semibold text-gray-800">${post.userName}</h3>
                        <p class="text-sm text-gray-500">${post.clubName}</p>
                    </div>
                </div>
                <p class="mt-4 text-gray-700">${post.content}</p>
                <div class="mt-4 grid grid-cols-2 gap-2">
                    <img src="${post.image}" alt="Post Image" class="rounded-lg">
                </div>
                <button type="button" class="bg-blue-500 text-white px-4 py-2 mt-4 rounded-md hover:bg-blue-600 register-btn">Register Now</button>
                <div class="mt-4 flex items-center justify-between text-gray-500">
                    <div class="flex items-center space-x-4">
                        <span>‚ù§Ô∏è ${post.likes}</span>
                        <span>üí¨ ${post.comments.length} Comments</span>
                        <span>üîÑ ${post.shares} Shares</span>
                    </div>
                    <button class="text-gray-400 hover:text-gray-600">...</button>
                </div>
                <div class="comments mt-3 space-y-2">
                    ${post.comments.map(comment => `
                        <div class="text-sm text-gray-600"><strong>${comment.commenter}</strong>: ${comment.comment}</div>
                    `).join('')}
                </div>
                <input type="text" placeholder="Add a comment..." class="mt-3 w-full p-2 border border-gray-300 rounded-md comment-input">
                <button class="mt-2 px-4 py-1 bg-gray-300 rounded-md text-sm hover:bg-gray-400 add-comment-btn">Add Comment</button>
            </div>`;
                mainContent.innerHTML += postCard;
            });

            attachCommentListeners();
        }

        // Function to handle adding comments
        function attachCommentListeners() {
            const commentButtons = document.querySelectorAll('.add-comment-btn');
            commentButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const postId = this.closest('.post-card').dataset.id;
                    const commentInput = this.previousElementSibling;
                    const newComment = commentInput.value.trim();

                    if (newComment) {
                        // Add comment to the corresponding post in the database
                        const post = communityData.posts.find(post => post.id === parseInt(postId));
                        post.comments.push({ commenter: 'Current User', comment: newComment });

                        // Update Local Storage
                        localStorage.setItem('communityData', JSON.stringify(communityData));

                        // Re-render posts
                        renderPosts();
                    }
                });
            });
        }

        window.onload = renderPosts();

    </script>

</body>

</html>